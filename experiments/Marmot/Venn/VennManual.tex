\documentclass[a4paper]{ltxdoc}
%\input{pgfmanual-dvipdfm.cfg}
%\input{../../text-en/pgfmanual-en-main-preamble}
\usepackage[version=latest]{pgf}
\usepackage{xkeyval,calc,listings,tikz,fp}
\usepackage{makeidx}
\makeindex
\usepackage{hyperref}
\hypersetup{%
        colorlinks=true,
        linkcolor=blue,
        filecolor=blue,
        urlcolor=blue,
        citecolor=blue,
        pdfborder=0 0 0,
}
\makeatletter          % see https://tex.stackexchange.com/q/33946
\input{pgfmanual.code} % 
\makeatother           % 
\input{pgfmanual-en-macros.tex} % link from
% /usr/local/texlive/2019/texmf-dist/doc/generic/pgf/macros/pgfmanual-en-macros.tex
% or the equivalent on your installation
\def\pgfautoxrefs{1}
\usetikzlibrary{venn}
\begin{document}
\section{Venn diagrams}
\begin{tikzlibrary}{venn}
    This library provides some styles and options for drawing Venn diagrams.
\end{tikzlibrary}

This is a library that allows one to draw Venn diagrams. It is meant to be an
alternative to the |venndiagram| package. It provides a very similar
functionality. However, there are two differences. While the |venndiagram|
package uses macros to highlight the sets, in the library this is done with pgf
keys. This allows the user highlight $(A\cup B)\setminus(A\cap B)$ with a simple
key |\Venn{op={(AuB)/(AnB)}}|. What is more, sometimes it is necessary to
customize diagrams beyond what is foreseen in packages/libraries. For instance,
some may need an easy access to the paths in order to, say, use them for
intersections. Most of the more advanved options are described in
section~\ref{sec:VennAdvancedOptions}. Section~\ref{sec:VennBasicOptions} deals
with the basic options.

\subsection{Basic options}
\label{sec:VennBasicOptions}

The \texttt{venn} library has some options and styles for drawing Venn diagrams.
\begin{key}{/tikz/Venn diagram}
        Installs a basic Venn diagram along with the |\Venn| macro.
\end{key}

The macro |\Venn| allows one to draw intersections, unions and on. The character
\texttt{n} stands for $\cap$, i.e.\ an intersection, and \texttt{u} for $\cup$,
i.e.\ a union.

\begin{codeexample}[width=5cm]
\begin{tikzpicture}[Venn diagram]
 \Venn{AnB}
\end{tikzpicture}
\end{codeexample}

The most basic parameters are listed next.

\begin{key}{/tikz/venn/style (initially {fill=red})}
         The fill style of the sets.
\end{key}
\begin{key}{/tikz/venn/frame (initially {thick})}
         Style of the frame.
\end{key}
\begin{key}{/tikz/venn/frame margin (initially {3mm})}
         Distance between the frame and the sets.
\end{key}
\begin{key}{/tikz/venn/radius (initially {1.2cm})}
         Radius of the circles.
\end{key}
\begin{key}{/tikz/venn/radius (initially {1.2cm})}
         Radius of the circles.
\end{key}
\begin{key}{/tikz/venn/lines (initially {thin})}
         Style of the circles.
\end{key}



\begin{codeexample}[width=5cm]
\begin{tikzpicture}[Venn diagram={
	style={fill=orange},
	frame/.style={blue,dashed},
	frame margin=2mm,
	lines/.style={purple,semithick},
	circle B/.style={cyan,thick}}]
 \Venn{CuB}
\end{tikzpicture}
\end{codeexample}

As one can see, it is possible to give circles their individual styles. Whether
or not this is a good idea is another question. Note also that there is no precaution taken for the case that a user changes the
distance too large such that the circles do not intersect.


\begin{key}{/tikz/venn/number of sets (initially 3)}
        Number of sets. Only 2 or 3 are allowed.
\end{key}


\begin{codeexample}[width=5cm]
\begin{tikzpicture}[Venn diagram=
 {number of sets=2,
 style={fill=orange}}]
 \Venn{AnB}
\end{tikzpicture}
\end{codeexample}


\begin{key}{/tikz/venn/labels (initially \{"A","B","C"\})}
		Changes the labels (or names) of the sets. The names of the sets are to
		be used in the operations of the sets. Note that the number of entries
		in this list needs to be at least as large as the number of sets.
\end{key}

\begin{codeexample}[width=5cm]
\begin{tikzpicture}[Venn diagram=
	{labels={"X_1","X_2","X_3"}}]
 \Venn{X_1uX_2={fill=blue,opacity=0.5},
   X_2nX_3={fill=red,opacity=0.5}}
\end{tikzpicture}
\end{codeexample}


\begin{key}{/tikz/venn/label math (initially true)}
		Changes the labels (or names) of the sets. The names of the sets are to
		be used in the operations of the sets. Note that the number of entries
		in this list needs to be at least as large as the number of sets.
\end{key}

\begin{key}{/tikz/venn/all labels (initially empty)}
		Style for all labels.
\end{key}



\begin{codeexample}[width=5cm]
\begin{tikzpicture}[Venn diagram={%
  labels={"marmot","koala","duck"},
  all labels/.style={font=\sffamily},
  label math=false}]
 \Venn{marmotukoala={fill=blue,opacity=0.5}, 
 duck={fill=red,opacity=0.5}};
 \path[fill=blue,
  venn/and={marmot and koala}];
 \node[venn/and={marmot and koala},
 rotate=30,anchor=west,text=white] 
 {tikzling};
\end{tikzpicture}
\end{codeexample}


The |-| character indicates an exclusion. That is, |-B,AuC| means ``exclude $B$
and highlight the intersection of $A$ and $C$, $A\cap C$''.

\begin{codeexample}[width=5cm]
\begin{tikzpicture}[Venn diagram]
 \Venn{-B,AuC}
\end{tikzpicture}
\end{codeexample}

Many users may find it inconvenient to adopt to this way of thinking. That's why
there is the |op| key. 

\begin{key}{/tikz/venn/op (initially empty)}
        Supports the syntax $\mbox{some set}\setminus\mbox{some other set}$. It
		is to be entered in the form |(valid set)/(another valid set)| with the
		valid sets being the ones discussed above (without any minus).
\end{key}

\begin{codeexample}[width=5cm]
\begin{tikzpicture}[Venn diagram]
 \Venn{op={(BuC)/(A)}}
\end{tikzpicture}
\end{codeexample}

\begin{codeexample}[width=5cm]
\begin{tikzpicture}[Venn diagram]
 \Venn{op={(AuB)/(AnB)}}
\end{tikzpicture}
\end{codeexample}

\begin{key}{/tikz/venn/every Venn diagram }
        Style that applies to all Venn diagrams. 
\end{key}

\subsection{Advanced options}
\label{sec:VennAdvancedOptions}

The options discussed in section~\ref{sec:VennBasicOptions} will allow one to
draw most of the standard sets, but not all. Sometimes one may want to access
the building blocks to highlight more complicated sets. 

\begin{key}{/tikz/venn/and }
        Intersection of two sets. 
\end{key}

\begin{codeexample}[width=5cm]
\begin{tikzpicture}[Venn diagram]
 \path[fill=blue,venn/and={A and B}];
\end{tikzpicture}
\end{codeexample}

\begin{key}{/tikz/venn/union }
        Union of two sets. 
\end{key}

\begin{codeexample}[width=5cm]
\begin{tikzpicture}[Venn diagram]
 \path[fill=orange,venn/union={A and C}];
\end{tikzpicture}
\end{codeexample}

It may be important to know that one can use |Venn diagram| in scopes. Each of
the corresponding |local bounding box|es has the name |Venn Box| but one can
give them additional names.

\begin{codeexample}[]
\begin{tikzpicture}
 \begin{scope}[Venn diagram,local bounding box=AnB]
  \Venn{AnB}
 \end{scope}
 \path (AnB.north) node[above] {$A\cap B$};
 \begin{scope}[Venn diagram={style={fill=blue}},xshift=6cm,local bounding box=AuC]
  \Venn{AuC}
 \end{scope}
 \path (AuC.north) node[above] {$A\cup C$};
\end{tikzpicture}
\end{codeexample}

\begin{key}{/tikz/current reverse clip }
        This style has been adapted from https://tex.stackexchange.com/a/127045.
		It allows one to invert a clip selection. Notice that the orientation of
		the clip paths matters. Therefore there is |/tikz/current reverse clip'|
		available which reverts the direction of the bounding box path.
\end{key}

\begin{key}{/tikz/center prefix (initially c)}
        This key specifies the prefix of the coordinates of the center.
\end{key}

\begin{codeexample}[]
\begin{tikzpicture}
 \begin{scope}[Venn diagram={style={fill=blue},
  labels={"X","Y","Z"}},xshift=6cm,local bounding box=auto]
  \Venn{op={(XnY)/(Z)}}
 \end{scope}
 \path (AuC.north) node[above] {using \texttt{\textbackslash Venn}};
 \begin{scope}[Venn diagram,local bounding box=by hand]
   \clip (cC) circle[radius=\pgfkeysvalueof{/tikz/venn/radius}] [current reverse clip];
   \path[fill=blue,venn/and={A and B}];
 \end{scope}
 \path (AnB.north) node[above] {``by hand''};
\end{tikzpicture}
\end{codeexample}
% fix me: it does not work if one draws the left diagram first. why 
% would one need a double scope here?

\begin{key}{/tikz/venn/set (set)}
        This style inserts the path of a given set.
\end{key}


\begin{key}{/tikz/even odd clip }
        This style has been adapted from https://tex.stackexchange.com/a/76216.
		It allows one to apply the |even odd rule| to clips.
\end{key}

This key allows us to shade more complicated sets such as $A\cup\bigl((B\cup
C)\setminus (B \cap C)\bigr)$.

\begin{codeexample}[width=5cm]
\begin{tikzpicture}[Venn diagram]
 \clip[even odd clip,venn/set=B,venn/set=C];
 \fill[orange,venn/set=A];
\end{tikzpicture}
\end{codeexample}

\end{document}
\endinput
